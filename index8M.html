<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Next Big Break - Join the Waitlist</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #000000 0%, #1e3a8a 100%); }
    .card-hover { transition: all .3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(59,130,246,.2); }
    .letter-animate { opacity:0; animation: letterDrop .6s ease-out forwards; }
    @keyframes letterDrop { 0%{opacity:0; transform: translateY(-50px) rotateX(90deg);} 100%{opacity:1; transform: translateY(0) rotateX(0);} }
    .fade-in-up { animation: fadeInUp 1s ease-out both; }
    @keyframes fadeInUp { 0%{opacity:0; transform: translateY(30px);} 100%{opacity:1; transform: translateY(0);} }
    .pulse-blue { animation: pulse-blue 2s infinite; }
    @keyframes pulse-blue { 0%,100%{box-shadow:0 0 0 0 rgba(59,130,246,.7);} 70%{box-shadow:0 0 0 10px rgba(59,130,246,0);} }
  </style>
</head>
<body class="bg-black text-white min-h-screen overflow-x-hidden">
  <div class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8 min-h-screen flex flex-col lg:flex-row items-center justify-between">
      <!-- Left: Hero -->
      <div class="w-full lg:w-1/2 mb-12 lg:mb-0">
        <div class="space-y-6">
          <div class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold leading-tight text-blue-300" id="animatedTitle"></div>
          <p class="text-gray-300 text-lg md:text-xl max-w-2xl fade-in-up" style="animation-delay: .8s;">
            Join an exclusive community of film industry professionals, creators, and visionaries.
          </p>
          <div class="flex flex-col sm:flex-row gap-6 mt-8 fade-in-up" style="animation-delay: 1.1s;">
            <div class="flex items-center gap-3">
              <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
              <span class="text-gray-300">Early access guaranteed</span>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
              <span class="text-gray-300">No spam, ever</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Form -->
      <div class="w-full lg:w-1/2 lg:pl-12">
        <div class="bg-gray-900/80 backdrop-blur-sm rounded-2xl p-8 shadow-2xl card-hover border border-gray-800">
          <form id="waitlistForm" class="space-y-6" novalidate>
            <div>
              <label class="block text-gray-300 text-sm font-medium mb-2" for="fullName">Full Name</label>
              <input id="fullName" name="fullName" type="text" required
                     class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                     placeholder="Enter your full name" />
            </div>

            <div>
              <label class="block text-gray-300 text-sm font-medium mb-2" for="email">Email Address</label>
              <input id="email" name="email" type="email" required
                     class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                     placeholder="your.email@example.com" />
            </div>

            <div>
              <label class="block text-gray-300 text-sm font-medium mb-2" for="role">Role</label>
              <select id="role" name="role" required
                      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">Select your role</option>
                <option>Designer</option>
                <option>Filmmaker</option>
                <option>Artist</option>
                <option>Photographer</option>
                <option>Animator</option>
                <option>Writer</option>
                <option>Musician</option>
                <option>Actor</option>
                <option>Creative Director</option>
                <option>Art Director</option>
                <option>Copywriter</option>
                <option>Illustrator</option>
                <option>Video Editor</option>
                <option>Sound Designer</option>
                <option>Game Developer</option>
                <option>Other</option>
              </select>
            </div>

            <div>
              <label class="block text-gray-300 text-sm font-medium mb-2" for="location">Location</label>
              <input id="location" name="location" type="text" required
                     class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                     placeholder="City, Country" />
            </div>

            <button id="submitBtn" type="submit"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition duration-200 transform hover:scale-105 pulse-blue">
              Join the Waitlist
            </button>
          </form>

          <!-- Thank You -->
          <div id="thankYou" class="hidden text-center py-12">
            <div class="text-6xl mb-4">ðŸŽ‰</div>
            <h2 class="text-2xl font-bold text-blue-400 mb-3">Thank you!</h2>
            <p class="text-gray-300 text-lg">Weâ€™ll get back to you shortly.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="container mx-auto px-4 pb-12">
      <div class="bg-gray-900/60 backdrop-blur-sm rounded-2xl p-8 border border-gray-800 fade-in-up">
        <h3 class="text-xl font-semibold text-blue-400 mb-6 text-center">Join the Creative Community</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
          <div class="space-y-2">
            <div id="totalMembers" class="text-3xl font-bold text-white">0</div>
            <div class="text-gray-400 text-sm">Total Members</div>
          </div>
          <div class="space-y-2">
            <div id="designers" class="text-3xl font-bold text-blue-400">0</div>
            <div class="text-gray-400 text-sm">Designers</div>
          </div>
          <div class="space-y-2">
            <div id="artists" class="text-3xl font-bold text-blue-400">0</div>
            <div class="text-gray-400 text-sm">Artists</div>
          </div>
          <div class="space-y-2">
            <div id="filmmakers" class="text-3xl font-bold text-blue-400">0</div>
            <div class="text-gray-400 text-sm">Filmmakers</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
const CONFIG = {
  GAS_URL: 'https://script.google.com/macros/s/AKfycbxu4WMjUJiu51xZTrL8aMS9Z5FO5fOXQnVHdkp6cviJM2Ibu6Vd2t_oLXqFy6Z9awCwnA/exec', // <-- paste your Web App URL (ends with /exec)
  TITLE: 'Your next big break is here',
  LETTER_DELAY_MS: 120
};

document.addEventListener('DOMContentLoaded', () => {
  animateTitle(CONFIG.TITLE);
  wireForm();
  fetchStats(); // live counts from the sheet
});

/** Title animation */
function animateTitle(text) {
  const el = document.getElementById('animatedTitle');
  el.innerHTML = '';
  let i = 0;
  text.split(' ').forEach(word => {
    const wordSpan = document.createElement('span');
    wordSpan.className = 'inline-block mr-3';
    word.split('').forEach(ch => {
      const s = document.createElement('span');
      s.textContent = ch;
      s.className = 'letter-animate inline-block';
      s.style.animationDelay = (i * CONFIG.LETTER_DELAY_MS) + 'ms';
      i++;
      wordSpan.appendChild(s);
    });
    el.appendChild(wordSpan);
  });
}

/** Form handler */
function wireForm() {
  const form = document.getElementById('waitlistForm');
  const btn  = document.getElementById('submitBtn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const fullName = form.fullName.value.trim();
    const email    = form.email.value.trim();
    const role     = form.role.value.trim();
    const location = form.location.value.trim();

    // basic validation
    if (!fullName) return alert('Please enter your full name');
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) return alert('Please enter a valid email');
    if (!role) return alert('Please select your role');
    if (!location) return alert('Please enter your location');

    setLoading(btn, true);

    try {
      // URL-encoded â†’ no preflight; works great with Apps Script
      const body = new URLSearchParams({ fullName, email, role, location }).toString();
      const res = await fetch(CONFIG.GAS_URL + '?action=submit', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
        body
      });

      const data = await res.json().catch(() => ({}));
      if (data && data.ok) {
        showThanks();
        form.reset();
        // refresh stats after successful submission
        fetchStats(true);
      } else {
        alert(data && data.error ? data.error : 'Submission failed. Try again.');
      }
    } catch (err) {
      console.error(err);
      alert('Network error. Please try again.');
    } finally {
      setLoading(btn, false);
    }
  });
}

function setLoading(btn, loading) {
  if (loading) {
    btn.disabled = true;
    btn.innerHTML = `
      <div class="flex items-center justify-center">
        <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>
        Joining...
      </div>`;
  } else {
    btn.disabled = false;
    btn.textContent = 'Join the Waitlist';
    btn.classList.add('pulse-blue');
  }
}

function showThanks() {
  document.getElementById('waitlistForm').classList.add('hidden');
  const card = document.getElementById('thankYou');
  card.classList.remove('hidden');
  card.classList.add('fade-in-up');
}

/** Fetch live stats from GAS (?action=stats) */
async function fetchStats(withAnim = false) {
  try {
    const res = await fetch(CONFIG.GAS_URL + '?action=stats');
    const { total = 0, byRole = {} } = await res.json();

    const numbers = {
      totalMembers: total,
      designers: byRole['Designer'] || 0,
      artists: byRole['Artist'] || 0,
      filmmakers: byRole['Filmmaker'] || 0
    };

    Object.entries(numbers).forEach(([id, val]) => {
      const el = document.getElementById(id);
      if (withAnim) return animateNumber(el, val);
      el.textContent = Number(val).toLocaleString();
    });

    if (!withAnim) {
      // first load â†’ animate once
      ['totalMembers','designers','artists','filmmakers'].forEach(id => {
        const el = document.getElementById(id);
        animateNumber(el, parseInt(el.textContent.replace(/,/g,''), 10));
      });
    }
  } catch (err) {
    console.warn('Stats fetch failed:', err);
  }
}

function animateNumber(el, target) {
  const duration = 800;
  const start = performance.now();
  const from = 0;

  function step(ts) {
    const p = Math.min((ts - start) / duration, 1);
    const value = Math.floor(from + (target - from) * p);
    el.textContent = value.toLocaleString();
    if (p < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
</script>
</body>
</html>
